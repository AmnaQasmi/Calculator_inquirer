"use strict";
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.InstanceTracker = void 0;
const event_emitter_1 = require("@figliolia/event-emitter");
class InstanceTracker {
    constructor() {
        InstanceTracker.clearAll();
        this.ID = InstanceTracker.IDs.get();
        InstanceTracker.bucket.set(this.ID, this.instance);
    }
    get instance() {
        return this;
    }
    static clearAll() {
        for (const [, animation] of InstanceTracker.bucket) {
            animation.stop();
        }
        InstanceTracker.bucket.clear();
    }
}
exports.InstanceTracker = InstanceTracker;
_a = InstanceTracker;
InstanceTracker.LOG = console.log;
InstanceTracker.IDs = new event_emitter_1.AutoIncrementingID();
InstanceTracker.bucket = new Map();
InstanceTracker.loggers = ["log", "warn", "info", "error"];
(() => {
    _a.loggers.forEach(method => {
        const original = console[method];
        console[method] = function (...args) {
            InstanceTracker.clearAll();
            return original.apply(console, args);
        };
    });
})();
