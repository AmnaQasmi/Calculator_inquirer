import { AutoIncrementingID } from "@figliolia/event-emitter";
export class InstanceTracker {
    ID;
    static LOG = console.log;
    static IDs = new AutoIncrementingID();
    static bucket = new Map();
    static loggers = ["log", "warn", "info", "error"];
    constructor() {
        InstanceTracker.clearAll();
        this.ID = InstanceTracker.IDs.get();
        InstanceTracker.bucket.set(this.ID, this.instance);
    }
    static {
        this.loggers.forEach(method => {
            const original = console[method];
            console[method] = function (...args) {
                InstanceTracker.clearAll();
                return original.apply(console, args);
            };
        });
    }
    get instance() {
        return this;
    }
    static clearAll() {
        for (const [, animation] of InstanceTracker.bucket) {
            animation.stop();
        }
        InstanceTracker.bucket.clear();
    }
}
